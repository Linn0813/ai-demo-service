# 🎨 功能模块确认界面改进方案

## 📋 当前问题分析

### 1. 弹窗问题
- ❌ 使用 `el-dialog` 弹窗，遮挡整个页面
- ❌ 无法同时查看配置和功能模块
- ❌ 页面空间利用不充分

### 2. 左右布局问题
- ❌ 左右分栏（10:14），在小屏幕上无法完整显示
- ❌ 需要左右滚动才能看到完整内容
- ❌ 原文查看区域空间受限

### 3. 原文匹配方法冗余
当前有太多修改方法：
- 模块片段模式（直接编辑）
- 完整文档模式（文本选择）
- 编辑模式（行号范围输入）
- 重新匹配原文（AI重新匹配）
- 行号选择模式（复选框）
- 行号范围输入（高级选项）
- 文本选择浮动按钮
- 选中预览

**问题**：方法太多，用户容易困惑，操作复杂

---

## 🎯 改进方案

### 方案一：垂直布局 + 简化操作（推荐）

#### 布局结构
```
┌─────────────────────────────────────────┐
│  [配置区域 - 可折叠]                     │
├─────────────────────────────────────────┤
│  [任务进度 - 实时更新]                   │
├─────────────────────────────────────────┤
│  [功能模块确认 - 页面内显示]             │
│  ┌───────────────────────────────────┐ │
│  │ 📋 功能模块列表（可折叠卡片）      │ │
│  │ 共6个功能模块                      │ │
│  │                                    │ │
│  │ ▼ 社交时差 [高置信度]              │ │
│  │   展示并分析用户在工作日和休息日... │ │
│  │   [编辑] [删除]                    │ │
│  │                                    │ │
│  │ ▼ 详情信息半弹窗 [高置信度]        │ │
│  │   ...                              │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 📄 模块详情（选中模块时显示）      │ │
│  │                                    │ │
│  │ 模块名称: 社交时差                  │ │
│  │ 描述: 展示并分析用户在工作日和...   │ │
│  │                                    │ │
│  │ [编辑原文] [重新匹配]              │ │
│  │                                    │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 匹配的原文内容                │ │ │
│  │ │ [可编辑文本框]                │ │ │
│  │ │                               │ │ │
│  │ │ 用户在工作日和休息日之间的...  │ │ │
│  │ │                               │ │ │
│  │ └───────────────────────────────┘ │ │
│  │                                    │ │
│  │ [查看完整文档] [使用选中文本]      │ │
│  └───────────────────────────────────┘ │
├─────────────────────────────────────────┤
│  [生成结果 - 动态加载]                   │
└─────────────────────────────────────────┘
```

#### 核心改进点

**1. 功能模块列表改为折叠卡片**
- 每个模块一个折叠卡片
- 点击展开查看详情和编辑
- 支持搜索和筛选
- 更节省空间，更易浏览

**2. 模块详情改为垂直展示**
- 选中模块后，在下方显示详情
- 原文编辑区域更大，更易阅读
- 支持快速编辑和查看完整文档

**3. 简化原文匹配方法**
保留核心方法：
- ✅ **直接编辑**：在文本框中直接编辑匹配的原文
- ✅ **查看完整文档**：点击按钮打开完整文档，支持文本选择
- ✅ **重新匹配**：AI自动重新匹配（保留）

移除冗余方法：
- ❌ 编辑模式（行号范围输入）- 合并到"查看完整文档"
- ❌ 行号选择模式（复选框）- 合并到"查看完整文档"
- ❌ 行号范围输入（高级选项）- 合并到"查看完整文档"
- ❌ 选中预览（即时反馈）- 简化为直接应用

**4. 统一的操作流程**
```
选择模块 → 查看/编辑原文 → 保存 → 确认生成
```

---

### 方案二：标签页切换

#### 布局结构
```
┌─────────────────────────────────────────┐
│  [配置区域]                             │
├─────────────────────────────────────────┤
│  [任务进度]                             │
├─────────────────────────────────────────┤
│  [功能模块确认]                         │
│  ┌───────────────────────────────────┐ │
│  │ [功能模块列表] [模块详情] [完整文档]│ │
│  │                                    │ │
│  │ 标签页1: 功能模块列表              │ │
│  │ 标签页2: 当前模块详情              │ │
│  │ 标签页3: 完整文档查看              │ │
│  └───────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

---

## 🔧 实施建议

### 推荐：方案一（垂直布局 + 简化操作）

**优势**：
- ✅ 页面空间利用更充分
- ✅ 操作流程更简单
- ✅ 移动端友好
- ✅ 减少用户学习成本

**实施步骤**：
1. 将 `FunctionPointsConfirm` 从弹窗改为页面内组件
2. 功能模块列表改为折叠卡片
3. 模块详情改为垂直展示
4. 简化原文匹配方法为3种核心方法
5. 优化移动端响应式布局

---

## 📊 改进效果对比

| 特性 | 当前方案 | 改进方案 |
|------|---------|---------|
| 布局方式 | 弹窗 + 左右分栏 | 页面内 + 垂直布局 |
| 空间利用 | 受限 | 充分利用 |
| 操作步骤 | 复杂（7+种方法） | 简单（3种方法） |
| 移动端体验 | 差 | 好 |
| 阅读体验 | 需要滚动 | 流畅 |

---

## 💡 具体改进点

### 1. 功能模块列表
- 改为折叠卡片，每个模块一个卡片
- 卡片内显示：名称、描述、置信度、预览
- 点击卡片展开/折叠详情
- 支持搜索和筛选

### 2. 模块详情编辑
- 选中模块后，在下方显示详情区域
- 原文编辑使用大文本框，支持直接编辑
- 提供"查看完整文档"按钮，打开侧边栏或新区域
- 在完整文档中支持文本选择，选择后自动应用到编辑框

### 3. 简化操作按钮
- **编辑原文**：直接编辑文本框中的内容
- **查看完整文档**：打开完整文档查看器，支持文本选择
- **重新匹配**：AI自动重新匹配（保留）

移除：
- 编辑模式（行号范围）
- 行号选择模式（复选框）
- 行号范围输入
- 选中预览

---

**推荐实施方案一，用户体验最佳！**

